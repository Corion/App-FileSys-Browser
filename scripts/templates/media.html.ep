<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Most recent albums</title>
%= include 'htmx-header';

</head>
<body hx-ext="ws,morphdom-swap" ws-connect="/notify?version=<%= $$ %>"
  hx-boost="true"
>
  <div id="container" hx-history-elt>
    <nav id="navigation" class="navbar navbar-expand-lg sticky-top">
      <a href="<%= url_for("/media/diagnostics") %>">Diagnostics</a>
      <div id="indicator-connection" class="offline" style="display:inline">Offline</div>
      <form method="GET"
            hx-encoding="multipart/form-data"
            enctype='multipart/form-data'
            action="<%= url_for("/") %>"
            hx-post="<%= url_for("/") %>"
            hx-trigger="input changed delay:300ms, keyup changed delay:300ms"
            hx-target="#albums"
        >
        <input type="text" name="q" value="<%= $filter %>" placeholder="Search" />
      </form>
    </nav>
    <div id="albums" class="grid-container">
%= include('album_grid', albums => $albums, offset => $offset, direction => 'prev,next')
    </div>
  </div>
  <video
    hx-preserve="true"
    id="my-player"
    class="video-js"
    controls
    preload="auto"
    autoplay="false"
    type="audio/mpeg"
    data-setup='{"audioPosterMode":true}'
    >
  <p class="vjs-no-js">
    To view this video please enable JavaScript
  </p>
  </video>
  <detail id="playqueueContainer" hx-preserve="true">
  <summary id="playqueue" hx-preserve="true">Queue
  </summary>
  </detail>
</body>
</html>
